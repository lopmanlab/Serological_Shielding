list.dirs()
list.files()
rm(list=ls())
=
rm(list=ls())
# get dirs
v.csvs = list.files(pattern = '.csv')
source('~/CYZ GITHUB/Weitz Group/COVID-19/Lopman Covid SeroPos/Serological_Shielding/CYZ_reorg/Matlab/plot_comparisons.R')
v.scvs
v.csvs
# get dirs
v.csvs = list.files(path = '/OUTPUT', pattern = '.csv')
v.csvs
# get dirs
v.csvs = list.files(path = 'OUTPUT', pattern = '.csv')
v.csvs
source('~/CYZ GITHUB/Weitz Group/COVID-19/Lopman Covid SeroPos/Serological_Shielding/CYZ_reorg/Matlab/plot_comparisons.R')
strsplit(v.csvs, '_')
strsplit(v.dirs, '_')
do.call('rbind', strsplit(v.dirs, '_'))
as.data.frame(do.call('rbind', strsplit(v.dirs, '_')))
do.call('rbind', strsplit(v.dirs, '_'))
df.dirs = data.frame('dirs' = v.dirs, do.call('rbind', strsplit(v.dirs, '_')))
df.dirs
df.dirs = data.frame('dirs' = v.dirs
, do.call('rbind', strsplit(v.dirs, '_'))
, stringsAsFactors = F)
df.dirs
df.dirs$X1
# fix
colnames(df.dirs) = c('dir', 'date', 'region', 'chain', 'summary')
source('~/CYZ GITHUB/Weitz Group/COVID-19/Lopman Covid SeroPos/Serological_Shielding/CYZ_reorg/Matlab/plot_comparisons.R')
df.dirs
source('~/CYZ GITHUB/Weitz Group/COVID-19/Lopman Covid SeroPos/Serological_Shielding/CYZ_reorg/Matlab/plot_comparisons.R')
df.dirs
source('~/CYZ GITHUB/Weitz Group/COVID-19/Lopman Covid SeroPos/Serological_Shielding/CYZ_reorg/Matlab/plot_comparisons.R')
df.dirs
source('~/CYZ GITHUB/Weitz Group/COVID-19/Lopman Covid SeroPos/Serological_Shielding/CYZ_reorg/Matlab/plot_comparisons.R')
source('~/CYZ GITHUB/Weitz Group/COVID-19/Lopman Covid SeroPos/Serological_Shielding/CYZ_reorg/Matlab/plot_comparisons.R')
df.dirs
read.csv(df.dirs$dir[1])
read.csv(paste('OUTPUT/', df.dirs$dir[1], sep='', collapse-''))
read.csv(paste('OUTPUT/', df.dirs$dir[1], sep='', collapse=''))
derp = read.csv(paste('OUTPUT/', df.dirs$dir[1], sep='', collapse=''))
source('~/CYZ GITHUB/Weitz Group/COVID-19/Lopman Covid SeroPos/Serological_Shielding/CYZ_reorg/Matlab/plot_comparisons.R')
derp
source('~/CYZ GITHUB/Weitz Group/COVID-19/Lopman Covid SeroPos/Serological_Shielding/CYZ_reorg/Matlab/plot_comparisons.R')
derp
source('~/CYZ GITHUB/Weitz Group/COVID-19/Lopman Covid SeroPos/Serological_Shielding/CYZ_reorg/Matlab/plot_comparisons.R')
derp
df.dirs
source('~/CYZ GITHUB/Weitz Group/COVID-19/Lopman Covid SeroPos/Serological_Shielding/CYZ_reorg/Matlab/plot_comparisons.R')
derp
apply(derp, 2, function(x) c(mean(x), sd(x)))
do.call('rbind', apply(derp, 2, function(x) c(mean(x), sd(x))))
unlist(apply(derp, 2, function(x) c(mean(x), sd(x)))))
unlist(apply(derp, 2, function(x) c(mean(x), sd(x))))
apply(derp, 2, function(x) c(mean(x), sd(x)))
apply(derp, 1, function(x) c(mean(x), sd(x)))
apply(derp, 2, function(x) c(mean(x), sd(x)))
source('~/CYZ GITHUB/Weitz Group/COVID-19/Lopman Covid SeroPos/Serological_Shielding/CYZ_reorg/Matlab/plot_comparisons.R')
apply(derp, 2, function(x) c(mean(x), sd(x)))
derp
apply(derp, 2, function(x) c(mean(x), sd(x)))
df.dirs$X = NULL
df.dirs
source('~/CYZ GITHUB/Weitz Group/COVID-19/Lopman Covid SeroPos/Serological_Shielding/CYZ_reorg/Matlab/plot_comparisons.R')
derp
df.dirs
derp
source('~/CYZ GITHUB/Weitz Group/COVID-19/Lopman Covid SeroPos/Serological_Shielding/CYZ_reorg/Matlab/plot_comparisons.R')
apply(derp, 2, function(x) c(mean(x), sd(x)))
apply(derp, 2, function(x) c(mean(x))
)
apply(derp, 2, function(x) c(mean(x)))
df.dirs
df.dirs
df.dirs$dir
sapply(df.dirs$dir, function(x){
temp = read.csv(paste('OUTPUT/', x, sep='', collapse=''))
temp$X = NULL # holdover form MATLAB mis-writing a blank olumn
apply(temp, 2, function(y) c(mean(y)))
})
temp.res = sapply(df.dirs$dir, function(x){
temp = read.csv(paste('OUTPUT/', x, sep='', collapse=''))
temp$X = NULL # holdover form MATLAB mis-writing a blank olumn
apply(temp, 2, function(y) c(mean(y)))
})
temp.res = t(temp.res)
temp.res
rownames(df.dirs) = df.dirs$dir
temp.res[rownames(df.dirs),]
cbind(df.dirs, temp.res[rownames(df.dirs),])
df.dirs = cbind(df.dirs, temp.res[rownames(df.dirs),])
df.allPras = cbind(df.dirs, temp.res[rownames(df.dirs),])
df.pars = cbind(df.dirs, temp.res[rownames(df.dirs),])
melt.pars = melt(df.pars, colnames(df.dirs))
source('~/CYZ GITHUB/Weitz Group/COVID-19/Lopman Covid SeroPos/Serological_Shielding/CYZ_reorg/Matlab/plot_comparisons.R')
melt.pars
source('~/CYZ GITHUB/Weitz Group/COVID-19/Lopman Covid SeroPos/Serological_Shielding/CYZ_reorg/Matlab/plot_comparisons.R')
source('~/CYZ GITHUB/Weitz Group/COVID-19/Lopman Covid SeroPos/Serological_Shielding/CYZ_reorg/Matlab/plot_comparisons.R')
source('~/CYZ GITHUB/Weitz Group/COVID-19/Lopman Covid SeroPos/Serological_Shielding/CYZ_reorg/Matlab/plot_comparisons.R')
# plot
ggplot(melt.pars, aes(x = variable, y = value)) +
geom_bar(stat = 'identity') +
facet_grid(date~region)
# plot
ggplot(melt.pars, aes(x = date, y = value)) +
geom_bar(stat = 'identity') +
facet_grid(region~variable)
# plot
ggplot(melt.pars, aes(x = date, y = value)) +
geom_bar(stat = 'identity') +
facet_grid(region~variable, scales = 'free')
# plot
ggplot(melt.pars, aes(x = date, y = value)) +
geom_bar(stat = 'identity') +
facet_grid(region~variable, scales = 'free_y')
melt.pars$value
melt.pars$variable
# plot
ggplot(melt.pars, aes(x = date, y = value)) +
geom_bar(stat = 'identity') +
facet_grid(variable~region, scales = 'free_y')
# plot
ggplot(melt.pars, aes(x = date, y = value, fill = region)) +
geom_bar(stat = 'identity', color = 'black') +
facet_wrap(variable, scales = 'free_y')
# plot
ggplot(melt.pars, aes(x = date, y = value, fill = region)) +
geom_bar(stat = 'identity', color = 'black') +
facet_wrap("variable", scales = 'free_y')
# plot
ggplot(melt.pars, aes(x = date, y = value, color = region)) +
geom_point() +
facet_wrap("variable", scales = 'free_y')
# plot
ggplot(melt.pars, aes(x = date, y = value, fill = region)) +
geom_bar(stat = 'identity', color = 'black', position = 'dodge') +
facet_wrap("variable", scales = 'free_y')
melt.pars
# map
v.map = c('unwt', 'unwt (long)', 'wtd')
names(v.map) = c('2020-10-05c', '2020-10-07', '2020-10-09')
source('~/CYZ GITHUB/Weitz Group/COVID-19/Lopman Covid SeroPos/Serological_Shielding/CYZ_reorg/Matlab/plot_comparisons.R')
melt.pars$date
melt.pars$date = v.map(melt.pars$date)
source('~/CYZ GITHUB/Weitz Group/COVID-19/Lopman Covid SeroPos/Serological_Shielding/CYZ_reorg/Matlab/plot_comparisons.R')
source('~/CYZ GITHUB/Weitz Group/COVID-19/Lopman Covid SeroPos/Serological_Shielding/CYZ_reorg/Matlab/plot_comparisons.R')
# plot
ggplot(melt.pars, aes(x = date, y = value, fill = region)) +
geom_bar(stat = 'identity', color = 'black', position = 'dodge') +
facet_wrap("variable", scales = 'free_y')
source('~/CYZ GITHUB/Weitz Group/COVID-19/Lopman Covid SeroPos/Serological_Shielding/CYZ_reorg/Matlab/plot_comparisons.R')
# plot
ggplot(melt.pars, aes(x = region, y = value, fill = date)) +
geom_bar(stat = 'identity', color = 'black', position = 'dodge') +
facet_wrap("variable", scales = 'free_y')
df.pars
temp.res
source('~/CYZ GITHUB/Weitz Group/COVID-19/Lopman Covid SeroPos/Serological_Shielding/CYZ_reorg/Matlab/plot_comparisons.R')
# plot
ggplot(melt.pars, aes(x = region, y = value, fill = date)) +
geom_bar(stat = 'identity', color = 'black', position = 'dodge') +
facet_wrap("variable", scales = 'free_y')
# plot
ggplot(melt.pars, aes(x = region, y = value, fill = date)) +
geom_bar(stat = 'identity', color = 'black', position = 'dodge') +
facet_grid(variable~region, scales = 'free_y')
# plot
ggplot(melt.pars, aes(x = region, y = value, fill = date)) +
geom_bar(stat = 'identity', color = 'black', position = 'dodge') +
facet_grid(variable~region, scales = 'free')
# plot
ggplot(melt.pars, aes(x = region, y = value, fill = date)) +
geom_bar(stat = 'identity', color = 'black', position = 'dodge') +
facet_wrap("variable", scales = 'free_y')
source('~/CYZ GITHUB/Weitz Group/COVID-19/Lopman Covid SeroPos/Serological_Shielding/CYZ_reorg/Matlab/plot_comparisons.R')
df.dirs
temp.res
df.pars
source('~/CYZ GITHUB/Weitz Group/COVID-19/Lopman Covid SeroPos/Serological_Shielding/CYZ_reorg/Matlab/plot_comparisons.R')
source('~/CYZ GITHUB/Weitz Group/COVID-19/Lopman Covid SeroPos/Serological_Shielding/CYZ_reorg/Matlab/plot_comparisons.R')
source('~/CYZ GITHUB/Weitz Group/COVID-19/Lopman Covid SeroPos/Serological_Shielding/CYZ_reorg/Matlab/plot_comparisons.R')
source('~/CYZ GITHUB/Weitz Group/COVID-19/Lopman Covid SeroPos/Serological_Shielding/CYZ_reorg/Matlab/plot_comparisons.R')
source('~/CYZ GITHUB/Weitz Group/COVID-19/Lopman Covid SeroPos/Serological_Shielding/CYZ_reorg/Matlab/plot_comparisons.R')
